% Mem growth plot: reads csv/mem_growth.csv and plots normalized time vs memory
\begin{figure}[h]
    \centering

    \begin{tikzpicture}
    \begin{axis}[
        width=8.5cm,
        height=4.0cm,
        xlabel={Normalized Elapsed Time},
        ylabel={Memory Usage (MB)},
        xmin=0, xmax=1,
        grid=both,
        grid style={gray!30},
        legend style={draw=none, at={(0.5,1.02)}, anchor=south, legend columns=3, legend cell align=left},
        tick label style={font=\small},
        label style={font=\small}
    ]

    % List of object ids to plot; adjust if needed
    % Each line filters rows by object_id and plots as a line
    
    % Object 6 = Cuckoo (htthree)
    \addplot[CuckooLineStyle, mark=none]
        table[x=normalized_time, y=memory_mb, restrict expr to domain={\thisrow{object_id}}{6:6}] {\memgrowthdata};
    \addlegendentry{\htthree}

    % Object 7 = IcebergHT (htfour)
    \addplot[IcebergLineStyle, mark=none]
        table[x=normalized_time, y=memory_mb, restrict expr to domain={\thisrow{object_id}}{7:7}] {\memgrowthdata};
    \addlegendentry{\htfour}

    % Object 15 = Junction (htfive)
    \addplot[JunctionLineStyle, mark=none]
        table[x=normalized_time, y=memory_mb, restrict expr to domain={\thisrow{object_id}}{15:15}] {\memgrowthdata};
    \addlegendentry{\htfive}

    % Object 24 = TBB (htsix)
    \addplot[TBBLineStyle, mark=none]
        table[x=normalized_time, y=memory_mb, restrict expr to domain={\thisrow{object_id}}{24:24}] {\memgrowthdata};
    \addlegendentry{\htsix}

    % Object 18 = Chained-TPHT (htone)
    \addplot[TPHTLineStyle, mark=none]
        table[x=normalized_time, y=memory_mb, restrict expr to domain={\thisrow{object_id}}{18:18}] {\memgrowthdata};
    \addlegendentry{\htone}

    % Object 21 = Flattened-TPHT (httwo)
    \addplot[BlastLineStyle, mark=none]
        table[x=normalized_time, y=memory_mb, restrict expr to domain={\thisrow{object_id}}{21:21}] {\memgrowthdata};
    \addlegendentry{\httwo}

    \end{axis}
    \end{tikzpicture}

    \caption{Memory growth over normalized time across methods.}
    \label{fig:mem_growth_plot}
\end{figure}


