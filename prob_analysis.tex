
\noindent
\begin{minipage}[t]{0.45\linewidth}
    \centering

    % Left: Load Factor (blue) with shading and markers
    \begin{tikzpicture}
        \begin{axis}[
                width=\linewidth,
                height=4cm,
                xlabel={Bin Size},
                ylabel={Load Factor Support (\%)},
                xmode=log,
                xmin=2,
                xmax=190,
                ymin=0,
                ymax=105,
                ytick={0,20,40,60,80,100},
                grid=major,
                grid style={gray!30},
                % clip=false,
                legend style={draw=none, font=\footnotesize, at={(0.5,1.02)}, anchor=south},
                legend columns=1,
                tick label style={font=\small},
                label style={font=\small},
                scaled ticks=true,
                xtick={3,7,15,31,63,127},
                xticklabels={$2^2$,$2^3$,$2^4$,$2^5$,$2^6$,$2^7$}
            ]

            % Legend entries
            \addlegendimage{InsertionOnlyStyle, mark=o, mark size=2.5pt}
            \addlegendentry{Insertion Only}
            \addlegendimage{WithDeletionStyle, mark=square, mark size=2.5pt}
            \addlegendentry{With Deletion}

            % Insertion (CSV) shaded area and line with markers
            \addplot[name path=insLineMini, draw=none] table[
                    x=bin_size,
                    y index=3,
                    col sep=comma,
                    restrict expr to domain={\thisrow{object_id}}{4:4}
                ] {\loadfactordata};
            \addplot[name path=insBaseMini, draw=none] coordinates {(3,0) (127,0)};
            \addplot[fill=exp1!25, fill opacity=0.35, draw=none, forget plot] fill between[of=insLineMini and insBaseMini];
            \addplot[InsertionOnlyStyle, mark=o, mark size=2.5pt] table[
                    x=bin_size,
                    y index=3,
                    col sep=comma,
                    restrict expr to domain={\thisrow{object_id}}{4:4}
                ] {\loadfactordata};

            % Deletion (hardcoded) shaded area and line with markers
            \addplot[name path=delLineMini, draw=none] coordinates {
                    (3,7)
                    (7,43)
                    (15,71)
                    (31,85)
                    (63,91)
                    (127,95)
                };
            \addplot[name path=delBaseMini, draw=none] coordinates {(3,0) (127,0)};
            \addplot[fill=poisson!25, fill opacity=0.35, draw=none, forget plot] fill between[of=delLineMini and delBaseMini];
            \addplot[WithDeletionStyle, mark=square, mark size=2.5pt] coordinates {
                    (3,7)
                    (7,43)
                    (15,71)
                    (31,85)
                    (63,91)
                    (127,95)
                };
        \end{axis}
    \end{tikzpicture}

    \captionof{figure}{Maximum load factor supported by power-of-two dereference tables across bin sizes, as described in Section~\ref{subsec:tpimpl}.}\label{fig:prob_load_mini}
\end{minipage}%
\hfill%
\begin{minipage}[t]{0.45\linewidth}
    \centering

    % Right: Occupancy (log scale) with boxplots and shaded Poisson
    \begin{tikzpicture}
        \begin{axis}[
                width=\linewidth,
                height=4cm,
                xlabel={Bin Occupancy},
                ylabel={Relative Frequency},
                ymode=log,
                ymin=1e-9,
                ymax=2.5,
                ytick={1e-1, 1e-3, 1e-5, 1e-7, 1e-9},
                xmin=0,
                xmax=11.5,
                xtick={0,1,3,5,7,9,11},
                xticklabels={0,1,3,5,7,9,11},
                grid=major,
                grid style={gray!30},
                % clip=false,
                legend style={draw=none, font=\footnotesize, at={(0.4,1.02)}, anchor=south, legend image post style={scale=0.5}},
                legend columns=2,
                legend cell align=left,
                tick label style={font=\small},
                label style={font=\small}
            ]

            % Legend entries
            \addlegendimage{area legend, draw=exp1, fill=exp1!25}
            \addlegendentry{Random}
            \addlegendimage{area legend, draw=exp2, fill=exp2!25}
            \addlegendentry{Sequential}
            \addlegendimage{area legend, draw=exp3, fill=exp3!25}
            \addlegendentry{Low Hamming}
            \addlegendimage{area legend, draw=exp4, fill=exp4!25}
            \addlegendentry{High Hamming}
            \addlegendimage{PoissonTheoryStyle}
            \addlegendentry{Poisson ($\lambda=1$)}

            % Box plots 0..11 with all key sets
            \foreach \i in {0,1,2,3,4,5,6,7,8,9,10,11} {
                % Random keys (leftmost)
                \pgfplotstablegetelem{\i}{lower_whisker}\of{\occboxrandom}\edef\lw{\pgfplotsretval}
                \pgfplotstablegetelem{\i}{lower}\of{\occboxrandom}\edef\lq{\pgfplotsretval}
                \pgfplotstablegetelem{\i}{median}\of{\occboxrandom}\edef\med{\pgfplotsretval}
                \pgfplotstablegetelem{\i}{upper}\of{\occboxrandom}\edef\uq{\pgfplotsretval}
                \pgfplotstablegetelem{\i}{upper_whisker}\of{\occboxrandom}\edef\uw{\pgfplotsretval}
                \pgfmathsetmacro{\pos}{\i - 0.3}
                \edef\boxopts{boxplot prepared={draw position=\pos, lower whisker=\lw, lower quartile=\lq, median=\med, upper quartile=\uq, upper whisker=\uw}, boxplot/draw direction=y, fill=exp1!25, draw=exp1}
                \expandafter\addplot\expandafter+\expandafter[\boxopts] coordinates {};
                
                % Sequential keys
                \pgfplotstablegetelem{\i}{lower_whisker}\of{\occboxsequential}\edef\lw{\pgfplotsretval}
                \pgfplotstablegetelem{\i}{lower}\of{\occboxsequential}\edef\lq{\pgfplotsretval}
                \pgfplotstablegetelem{\i}{median}\of{\occboxsequential}\edef\med{\pgfplotsretval}
                \pgfplotstablegetelem{\i}{upper}\of{\occboxsequential}\edef\uq{\pgfplotsretval}
                \pgfplotstablegetelem{\i}{upper_whisker}\of{\occboxsequential}\edef\uw{\pgfplotsretval}
                \pgfmathsetmacro{\pos}{\i - 0.1}
                \edef\boxopts{boxplot prepared={draw position=\pos, lower whisker=\lw, lower quartile=\lq, median=\med, upper quartile=\uq, upper whisker=\uw}, boxplot/draw direction=y, fill=exp2!25, draw=exp2, very thick}
                \expandafter\addplot\expandafter+\expandafter[\boxopts] coordinates {};
                
                % Low Hamming keys
                \pgfplotstablegetelem{\i}{lower_whisker}\of{\occboxlowhamming}\edef\lw{\pgfplotsretval}
                \pgfplotstablegetelem{\i}{lower}\of{\occboxlowhamming}\edef\lq{\pgfplotsretval}
                \pgfplotstablegetelem{\i}{median}\of{\occboxlowhamming}\edef\med{\pgfplotsretval}
                \pgfplotstablegetelem{\i}{upper}\of{\occboxlowhamming}\edef\uq{\pgfplotsretval}
                \pgfplotstablegetelem{\i}{upper_whisker}\of{\occboxlowhamming}\edef\uw{\pgfplotsretval}
                \pgfmathsetmacro{\pos}{\i + 0.1}
                \edef\boxopts{boxplot prepared={draw position=\pos, lower whisker=\lw, lower quartile=\lq, median=\med, upper quartile=\uq, upper whisker=\uw}, boxplot/draw direction=y, fill=exp3!25, draw=exp3}
                \expandafter\addplot\expandafter+\expandafter[\boxopts] coordinates {};
                
                % High Hamming keys (rightmost)
                \pgfplotstablegetelem{\i}{lower_whisker}\of{\occboxhighhamming}\edef\lw{\pgfplotsretval}
                \pgfplotstablegetelem{\i}{lower}\of{\occboxhighhamming}\edef\lq{\pgfplotsretval}
                \pgfplotstablegetelem{\i}{median}\of{\occboxhighhamming}\edef\med{\pgfplotsretval}
                \pgfplotstablegetelem{\i}{upper}\of{\occboxhighhamming}\edef\uq{\pgfplotsretval}
                \pgfplotstablegetelem{\i}{upper_whisker}\of{\occboxhighhamming}\edef\uw{\pgfplotsretval}
                \pgfmathsetmacro{\pos}{\i + 0.3}
                \edef\boxopts{boxplot prepared={draw position=\pos, lower whisker=\lw, lower quartile=\lq, median=\med, upper quartile=\uq, upper whisker=\uw}, boxplot/draw direction=y, fill=exp4!25, draw=exp4}
                \expandafter\addplot\expandafter+\expandafter[\boxopts] coordinates {};
            }

            % Shaded Poisson under curve and line on top
            \addplot[fill=poisson!25, fill opacity=0.35, draw=none, forget plot] table[
                    x=x,
                    y=y
                ] {\occpois} |- (axis cs:10,1.1e-9) -- (axis cs:0,1.1e-9) -- cycle;
            \addplot[PoissonTheoryStyle, mark=none] table[
                    x=x,
                    y=y
                ] {\occpois};
        \end{axis}
    \end{tikzpicture}

    \captionof{figure}{Bin occupancy distribution comparing with smoothed Poisson approximation ($\lambda=1$).}\label{fig:prob_occ_mini}
\end{minipage}
